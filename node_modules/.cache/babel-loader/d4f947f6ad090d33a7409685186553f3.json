{"ast":null,"code":"import _asyncToGenerator from\"/Volumes/Study/CS/React JS/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Volumes/Study/CS/React JS/app/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import Highcharts from'highcharts';import crossfilter from'crossfilter';import Loading from'../utility/Loading';import CustomRadio from'../utility/CustomRadio';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function TaskGraph(){var chartData=[];function getData(_x){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url,{method:'GET'});case 2:response=_context.sent;return _context.abrupt(\"return\",response.json());case 4:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}var prepareData=function prepareData(data){var statusFilter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var cf=crossfilter(data);if(statusFilter){cf.dimension(function(d){return d.status;}).filter(statusFilter);}var analystDim=cf.dimension(function(d){return d.analyst;});var series=analystDim.group().reduceSum(function(d){return d.amount;}).all();// changing format of data to feed highchart\nvar seriesData=[];for(var i=0;i<series.length;i++){var obj={name:'',y:0};obj.name=series[i].key;obj.y=series[i].value;seriesData.push(obj);}return[{name:'Task Share',data:seriesData}];};var loadChart=function loadChart(){var URL='http://localhost/API/Admin/fetch-task-performance.php';getData(URL).then(function(data){chartData=data.data;data=prepareData(data.data);var analystSelect=document.getElementById('analyst-filter-select');analystSelect.innerHTML='';var option=document.createElement('option');option.innerText='Select Analyst Filter';option.value='';option.selected=true;analystSelect.appendChild(option);for(var i=0;i<data.length;i++){var _option=document.createElement('option');_option.innerText=data[i].name;_option.value=data[i].name;analystSelect.appendChild(_option);}document.getElementsByName('status2')[2].checked=true;renderChart(data);});};var updateChart=function updateChart(){var status=document.getElementsByName('status1');var statusFilter='';for(var i=0;i<status.length;i++){if(status[i].checked){statusFilter=status[i].value;break;}}var data=prepareData(chartData,statusFilter);renderChart(data);};var renderChart=function renderChart(data){// Build the chart\nHighcharts.chart('graph-1',{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false,type:'pie'},title:{text:'Analyst task completion share'},tooltip:{pointFormat:'{series.name}: <b>{point.y} <i class=\"fas fa-rupee-sign\"></i></b>'},accessibility:{point:{valueSuffix:'%'}},plotOptions:{pie:{allowPointSelect:true,cursor:'pointer',dataLabels:{enabled:true,format:'<b>{point.name}</b>: {point.percentage:.1f} %',connectorColor:'silver'}}},credits:{enabled:false},series:data});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"graph-1\",children:/*#__PURE__*/_jsx(Loading,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-block\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"customized-radio-black\",children:[/*#__PURE__*/_jsx(CustomRadio,{value:\"Completed\",text:\"Completed\",name:\"status1\",icon:\"fas fa-check\",onclick:updateChart}),/*#__PURE__*/_jsx(CustomRadio,{value:\"Pending\",text:\"Pending\",name:\"status1\",icon:\"fas fa-box-open\",onclick:updateChart}),/*#__PURE__*/_jsx(CustomRadio,{value:\"\",text:\"Accumulated\",name:\"status1\",icon:\"fas fa-box\",checked:true,onclick:updateChart})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-row jc-e\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-medium\",onClick:loadChart,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync\"}),\" Refresh\"]})}),loadChart()]});}export default TaskGraph;","map":{"version":3,"sources":["/Volumes/Study/CS/React JS/app/src/components/graphs/TaskShareGraph.js"],"names":["React","Highcharts","crossfilter","Loading","CustomRadio","TaskGraph","chartData","getData","url","fetch","method","response","json","prepareData","data","statusFilter","cf","dimension","d","status","filter","analystDim","analyst","series","group","reduceSum","amount","all","seriesData","i","length","obj","name","y","key","value","push","loadChart","URL","then","analystSelect","document","getElementById","innerHTML","option","createElement","innerText","selected","appendChild","getElementsByName","checked","renderChart","updateChart","chart","plotBackgroundColor","plotBorderWidth","plotShadow","type","title","text","tooltip","pointFormat","accessibility","point","valueSuffix","plotOptions","pie","allowPointSelect","cursor","dataLabels","enabled","format","connectorColor","credits"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Highcharts from 'highcharts';\nimport crossfilter from 'crossfilter';\nimport Loading from '../utility/Loading';\nimport CustomRadio from '../utility/CustomRadio';\n\nfunction TaskGraph() {\n\n    var chartData = [];\n\n    async function getData(url) {\n        const response = await fetch(url, {\n            method: 'GET'\n        });\n        return response.json(); \n    }\n\n    const prepareData = (data, statusFilter = '') => {\n        let cf = crossfilter(data);\n\n        if(statusFilter) {\n            cf.dimension((d) => {return d.status}).filter(statusFilter);\n        }\n\n        let analystDim = cf.dimension((d) => {return d.analyst});\n\n        let series = analystDim.group().reduceSum((d) => {return d.amount}).all();\n\n        // changing format of data to feed highchart\n        let seriesData = [];\n        for(let i=0; i<series.length; i++) {\n            let obj = {\n                name: '',\n                y: 0\n            };\n            obj.name = series[i].key;\n            obj.y = series[i].value;\n            seriesData.push(obj)\n        }\n\n        return [{\n            name: 'Task Share',\n            data: seriesData\n        }]\n    }\n\n    const loadChart = () => {\n        \n        var URL = 'http://localhost/API/Admin/fetch-task-performance.php';\n\n        getData(URL)\n        .then(data => {\n            chartData = data.data;\n            data = prepareData(data.data);\n            let analystSelect = document.getElementById('analyst-filter-select');\n            analystSelect.innerHTML = '';\n\n            let option = document.createElement('option');\n            option.innerText = 'Select Analyst Filter';\n            option.value = '';\n            option.selected = true;\n            analystSelect.appendChild(option);\n\n            for(let i=0; i<data.length; i++) {\n                let option = document.createElement('option');\n                option.innerText = data[i].name;\n                option.value = data[i].name;\n                analystSelect.appendChild(option);\n            }\n            document.getElementsByName('status2')[2].checked = true;\n            renderChart(data);\n            \n        });\n    }\n\n    \n    const updateChart = () => {\n        let status = document.getElementsByName('status1');\n        let statusFilter = '';\n        for(let i=0; i<status.length; i++) {\n            if(status[i].checked) { \n                statusFilter = status[i].value;\n                break;\n            }\n        }\n        let data = prepareData(chartData, statusFilter);\n        renderChart(data);\n    }\n\n    const renderChart = (data) => {\n\n        // Build the chart\n        Highcharts.chart('graph-1', {\n            chart: {\n                plotBackgroundColor: null,\n                plotBorderWidth: null,\n                plotShadow: false,\n                type: 'pie'\n            },\n            title: {\n                text: 'Analyst task completion share'\n            },\n            tooltip: {\n                pointFormat: '{series.name}: <b>{point.y} <i class=\"fas fa-rupee-sign\"></i></b>'\n            },\n            accessibility: {\n                point: {\n                    valueSuffix: '%'\n                }\n            },\n            plotOptions: {\n                pie: {\n                    allowPointSelect: true,\n                    cursor: 'pointer',\n                    dataLabels: {\n                        enabled: true,\n                        format: '<b>{point.name}</b>: {point.percentage:.1f} %',\n                        connectorColor: 'silver'\n                    }\n                }\n            },\n            credits: {\n                enabled: false\n            },\n            series: data\n        });\n    }\n    return (\n        <>\n            <div id=\"graph-1\">\n                <Loading />\n            </div>\n            <div className='input-block'>\n                <div className='customized-radio-black'>\n                    \n                <CustomRadio \n                        value='Completed' \n                        text='Completed'\n                        name='status1'\n                        icon='fas fa-check'\n                        onclick={updateChart}\n                    />\n                    <CustomRadio \n                        value='Pending' \n                        text='Pending'\n                        name='status1'\n                        icon='fas fa-box-open'\n                        onclick={updateChart}\n                    />\n                    <CustomRadio \n                        value='' \n                        text='Accumulated'\n                        name='status1'\n                        icon='fas fa-box'\n                        checked={true}\n                        onclick={updateChart}\n                    />\n                </div> \n            </div>\n            <div className='flex-row jc-e'>\n                <button className='btn btn-primary btn-medium' onClick={loadChart}><i className='fas fa-sync'/> Refresh</button>\n            </div>\n            {loadChart()}\n        </>\n    )\n}\n\nexport default TaskGraph\n"]},"metadata":{},"sourceType":"module"}