{"ast":null,"code":"import _asyncToGenerator from\"/Volumes/Study/CS/React JS/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Volumes/Study/CS/React JS/app/node_modules/@babel/runtime/regenerator/index.js\";import React from'react';import Highcharts from'highcharts';import crossfilter from'crossfilter';import Loading from'../utility/Loading';import CustomRadio from'../utility/CustomRadio';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function PerformanceGraph(){var chartData=[];function getData(_x){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(url){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url,{method:'GET'});case 2:response=_context.sent;return _context.abrupt(\"return\",response.json());case 4:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}function reduceAdd(p,v,nf){p.data.push(v.amount);return p;}function reduceRemove(p,v,nf){p.data.pop();return p;}function reduceInitial(){return{data:[]};}var prepareData=function prepareData(data){var analystFilter=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var statusFilter=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';var cf=crossfilter(data);if(analystFilter){cf.dimension(function(d){return d.analyst;}).filter(analystFilter);}if(statusFilter){cf.dimension(function(d){return d.status;}).filter(statusFilter);}var analystDim=cf.dimension(function(d){return d.analyst;});var series=analystDim.group().reduce(reduceAdd,reduceRemove,reduceInitial).all();var seriesData=[];for(var i=0;i<series.length;i++){var obj={name:series[i].key,data:series[i].value.data};seriesData.push(obj);}return seriesData;};var loadChart=function loadChart(){var URL='http://apiforreact-env.eba-umuhetyq.ap-south-1.elasticbeanstalk.com/Admin/fetch-task-performance.php';getData(URL).then(function(data){chartData=data.data;data=prepareData(data.data);var analystSelect=document.getElementById('analyst-filter-select');analystSelect.innerHTML='';var option=document.createElement('option');option.innerText='Select Analyst Filter';option.value='';option.selected=true;analystSelect.appendChild(option);for(var i=0;i<data.length;i++){var _option=document.createElement('option');_option.innerText=data[i].name;_option.value=data[i].name;analystSelect.appendChild(_option);}document.getElementsByName('status2')[2].checked=true;renderChart(data);});};var updateChart=function updateChart(){var analystFilter=document.getElementById('analyst-filter-select').value;var status=document.getElementsByName('status2');var statusFilter='';for(var i=0;i<status.length;i++){if(status[i].checked){statusFilter=status[i].value;break;}}var data=prepareData(chartData,analystFilter,statusFilter);renderChart(data);};var renderChart=function renderChart(data){Highcharts.chart('graph-2',{title:{text:'Analyst Performance'},subtitle:{text:null},credits:{enabled:false},yAxis:{title:{text:'Payment of task'}},xAxis:{title:{text:'Number of tasks'},accessibility:{rangeDescription:'Range: 2010 to 2017'}},legend:{layout:'vertical',align:'right',verticalAlign:'middle'},plotOptions:{series:{label:{connectorAllowed:false},pointStart:1}},series:data,responsive:{rules:[{condition:{maxWidth:500},chartOptions:{legend:{layout:'horizontal',align:'center',verticalAlign:'bottom'}}}]}});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{id:\"graph-2\",children:/*#__PURE__*/_jsx(Loading,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"input-block\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"customized-radio-black\",children:[/*#__PURE__*/_jsx(CustomRadio,{value:\"Completed\",text:\"Completed\",name:\"status2\",icon:\"fas fa-check\",onclick:updateChart}),/*#__PURE__*/_jsx(CustomRadio,{value:\"Pending\",text:\"Pending\",name:\"status2\",icon:\"fas fa-box-open\",onclick:updateChart}),/*#__PURE__*/_jsx(CustomRadio,{value:\"\",text:\"Accumulated\",name:\"status2\",icon:\"fas fa-box\",checked:true,onclick:updateChart})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-row jc-sb\",children:[/*#__PURE__*/_jsx(\"select\",{id:\"analyst-filter-select\",onChange:updateChart,children:/*#__PURE__*/_jsx(\"option\",{disabled:true,children:\"Select Analyst\"})}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary btn-medium\",onClick:loadChart,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-sync\"}),\" Refresh\"]})]}),loadChart()]});}export default PerformanceGraph;","map":{"version":3,"sources":["/Volumes/Study/CS/React JS/app/src/components/graphs/PerformanceGraph.js"],"names":["React","Highcharts","crossfilter","Loading","CustomRadio","PerformanceGraph","chartData","getData","url","fetch","method","response","json","reduceAdd","p","v","nf","data","push","amount","reduceRemove","pop","reduceInitial","prepareData","analystFilter","statusFilter","cf","dimension","d","analyst","filter","status","analystDim","series","group","reduce","all","seriesData","i","length","obj","name","key","value","loadChart","URL","then","analystSelect","document","getElementById","innerHTML","option","createElement","innerText","selected","appendChild","getElementsByName","checked","renderChart","updateChart","chart","title","text","subtitle","credits","enabled","yAxis","xAxis","accessibility","rangeDescription","legend","layout","align","verticalAlign","plotOptions","label","connectorAllowed","pointStart","responsive","rules","condition","maxWidth","chartOptions"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Highcharts from 'highcharts';\nimport crossfilter from 'crossfilter';\nimport Loading from '../utility/Loading';\nimport CustomRadio from '../utility/CustomRadio';\n\nfunction PerformanceGraph() {\n\n    var chartData = [];\n\n    async function getData(url) {\n        const response = await fetch(url, {\n            method: 'GET'\n        });\n        return response.json(); \n    }\n\n    function reduceAdd(p, v, nf) {\n        p.data.push(v.amount);\n        return p;\n    }\n\n    function reduceRemove(p, v, nf) {\n        p.data.pop();\n        return p;\n    }\n\n    function reduceInitial() {\n        return {data: []};\n    }\n\n    const prepareData = (data, analystFilter = '', statusFilter = '') => {\n        let cf = crossfilter(data);\n\n        if(analystFilter) {\n            cf.dimension((d) => {return d.analyst}).filter(analystFilter);\n        }\n        if(statusFilter) {\n            cf.dimension((d) => {return d.status}).filter(statusFilter);\n        }\n\n        let analystDim = cf.dimension((d) => {return d.analyst});\n\n        let series = analystDim.group().reduce(reduceAdd, reduceRemove, reduceInitial).all();\n        \n        let seriesData = [];\n        for(let i=0; i<series.length; i++) {\n            let obj = {\n                name: series[i].key,\n                data: series[i].value.data\n            }\n            seriesData.push(obj);\n        }\n\n        return seriesData\n    }\n\n    const loadChart = () => {\n        var URL = 'http://apiforreact-env.eba-umuhetyq.ap-south-1.elasticbeanstalk.com/Admin/fetch-task-performance.php';\n        \n\n        getData(URL)\n        .then(data => {\n            chartData = data.data;\n            data = prepareData(data.data);\n            let analystSelect = document.getElementById('analyst-filter-select');\n            analystSelect.innerHTML = '';\n\n            let option = document.createElement('option');\n            option.innerText = 'Select Analyst Filter';\n            option.value = '';\n            option.selected = true;\n            analystSelect.appendChild(option);\n\n            for(let i=0; i<data.length; i++) {\n                let option = document.createElement('option');\n                option.innerText = data[i].name;\n                option.value = data[i].name;\n                analystSelect.appendChild(option);\n            }\n            document.getElementsByName('status2')[2].checked = true;\n            renderChart(data);\n            \n        });\n    }\n\n\n    const updateChart = () => {\n        let analystFilter = document.getElementById('analyst-filter-select').value;\n        let status = document.getElementsByName('status2');\n        let statusFilter = '';\n        for(let i=0; i<status.length; i++) {\n            if(status[i].checked) { \n                statusFilter = status[i].value;\n                break;\n            }\n        }\n        let data = prepareData(chartData, analystFilter, statusFilter);\n        renderChart(data);\n    }\n\n    const renderChart = (data) => {\n        Highcharts.chart('graph-2', {\n\n            title: {\n                text: 'Analyst Performance'\n            },\n        \n            subtitle: {\n                text: null\n            },\n            credits: {\n                enabled: false\n            },\n        \n            yAxis: {\n                title: {\n                    text: 'Payment of task'\n                }\n            },\n        \n            xAxis: {\n                title: {\n                    text: 'Number of tasks'\n                },\n                accessibility: {\n                    rangeDescription: 'Range: 2010 to 2017'\n                }\n            },\n        \n            legend: {\n                layout: 'vertical',\n                align: 'right',\n                verticalAlign: 'middle'\n            },\n        \n            plotOptions: {\n                series: {\n                    label: {\n                        connectorAllowed: false\n                    },\n                    pointStart: 1\n                }\n            },\n        \n            series: data,\n        \n            responsive: {\n                rules: [{\n                    condition: {\n                        maxWidth: 500\n                    },\n                    chartOptions: {\n                        legend: {\n                            layout: 'horizontal',\n                            align: 'center',\n                            verticalAlign: 'bottom'\n                        }\n                    }\n                }]\n            }\n        \n        });\n    }\n    return (\n        <>\n            <div id=\"graph-2\">\n                <Loading />\n            </div>\n            <div className='input-block'>\n                <div className='customized-radio-black'>\n                    <CustomRadio \n                        value='Completed' \n                        text='Completed'\n                        name='status2'\n                        icon='fas fa-check'\n                        onclick={updateChart}\n                    />\n                    <CustomRadio \n                        value='Pending' \n                        text='Pending'\n                        name='status2'\n                        icon='fas fa-box-open'\n                        onclick={updateChart}\n                    />\n                    <CustomRadio \n                        value='' \n                        text='Accumulated'\n                        name='status2'\n                        icon='fas fa-box'\n                        checked={true}\n                        onclick={updateChart}\n                    />\n                </div> \n            </div>\n            <div className='flex-row jc-sb'>\n                <select id=\"analyst-filter-select\" onChange={updateChart}>\n                    <option disabled>Select Analyst</option>\n                </select>\n                <button className='btn btn-primary btn-medium' onClick={loadChart}><i className='fas fa-sync'/> Refresh</button>\n            </div>\n            {loadChart()}\n        </>\n    )\n}\n\nexport default PerformanceGraph\n"]},"metadata":{},"sourceType":"module"}